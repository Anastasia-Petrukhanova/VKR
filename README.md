# VKR
В данном репозитории расположены программы с алгоритмом вычисления оптического потока на основе метода Хорна-Шанка.
## Краткое описание файлов
1) OpticalFlow.py - программа для построения поля скоростей как для генерируемых в программе изображений, так и для загруженных файлов.
2) ComparisonApprox.py - программа для сравнения точностей вычисления поля скоростей для разных аппроксимаций оператора Лапласа.
3) BoundaryConditions.py - программа для анализа влияния граничных условий на точность вычислений.
4) Trajectory.py - программа для построения траектории отслеживаемых точек для сгенерированной последовательности изображений.
## Использованные библиотеки
1) PIL - необходима для чтения изображений, расположенных в отдельных файлах;
2) random - необходима для генерации случайных чисел для построения изображения;
3) numpy;
4) matplotlib.pyplot - для построения графиков;
5) numpy.linalg - для вычисления нормы вектра;
6) copy;
7) math;
8) os.path - для проверки наличия файла.
## OpticalFlow.py
### Введение
В данной программе реализован алгоритм построения поля скоростей на основе метода Хорна-Шанка. Задача сводится к решению системы линейных уравнений.

Для этого необходимо перейти от системы диференциальных уравнений Эйлера-Лагранжа к системе разностных уравнений. Так как в полученных уравнениях Эйлера-Лагранжа содержится лапласиан, то его необходимо аппроксимировать. Это можно сделать разными способами.
### Описание работы программы
Если предполагается использовать код для построения поля скоростей для своих двух изображений, то необходимо перед запуском загрузить нужные файлы в содержащую папку. Если изображение не квадратное, то будет "отсечена" лишняя часть.

При запуске пользователи выводится сообщение с выбором изображений: сгенерированными в программе или своими файлами. Далее нужно вести номер выбранного варианта.

Если выбирается первый вариант, то пользователю необходимо ввести размер стороны изображения (вводится одно число, так как оно будет квадратным). Иначе - пользователь вводит названия файлов.

Затем необходимо выбрать вариант аппроксимации оператора Лапласа: пятиточечная или девятиточечная.

Результатом работы будет построенное поле скоростей.
## ComparisonApprox.py
### Введение
Так как существуют разные варианты аппроксимации лапласиана, естественным будет вопрос о их сравнении.
### Описание работы программы
После запуска программы будут выведены полученные поля скоростей и график зависимости точности от количества итераций для двух заданных аппроксимаций лапласиана. 

В качестве тестовых изображений генерируется квадратное изображение размером 102х102; второе изображение получается путем смещения всех пикселей в заданном направлении.
## BoundaryConditions.py
### Введение
При переходе к разностным уравнениям возникает необходимость в выборе граничных условий. В данной программе рассматривается краевая задача Дирихле.

Рассматриваются разные значения функций u и v на границе для анализа их влияния на точность вычислений.
### Описание работы программы
После запуска программы будут выведены полученные поля скоростей и график зависимости точности от расстояния до границы для заданных в коде граничных условиях. 

В качестве тестовых изображений генерируется квадратное изображение размером 102х102; второе изображение получается путем смещения всех пикселей в заданном направлении.
## Trajectory.py
### Введение
Используя метод оптического потока можно построить траектории движения заданных начальных точек.
### Описание работы программы
В программе генерируется последовательность из 16 изображений. Для каждой последовательной пары строится поле скоростей и выводится на экран (отображаются векторы только отслеживаемых точек). В конце выводятся полученные траектории и фазовые траектории отслеживаемых точек (можно построить фазовые траектории для сравнения, так как функция заранее определена).
